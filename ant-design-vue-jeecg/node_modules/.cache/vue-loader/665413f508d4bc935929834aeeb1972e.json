{"remainingRequest":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\src\\views\\system\\modules\\AssociatedModal.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\src\\views\\system\\modules\\AssociatedModal.vue","mtime":1590406424954},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_css-loader@1.0.1@css-loader\\index.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_postcss-loader@3.0.0@postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.global-search .associate_input .ant-input-suffix {\n  right: 0 !important;\n}\n.global-search .ant-input-suffix .ant-btn-lg {\n  height: 32px;\n}\n.global-search .ant-input-affix-wrapper .ant-input:not(:last-child) {\n  padding: 0 50px 0 12px;\n}\n\n.global-search.ant-select-auto-complete .ant-input-affix-wrapper .ant-input-suffix button {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0;\n}\n.selece-option {\n  padding: 10px 10px;\n  display: flex;\n  align-items: center;\n}\n",{"version":3,"sources":["AssociatedModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AssociatedModal.vue","sourceRoot":"src/views/system/modules","sourcesContent":["<template>\r\n  <a-modal\r\n    title=\"课程作者\"\r\n    :width=\"600\"\r\n    :visible=\"visible\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    @ok=\"handleOk\"\r\n    @cancel=\"handleCancel\"\r\n    cancelText=\"关闭\"\r\n  >\r\n    <a-spin :spinning=\"confirmLoading\">\r\n      <a-form :form=\"form\">\r\n        <a-form-item\r\n          :labelCol=\"labelCol\"\r\n          :wrapperCol=\"wrapperCol\"\r\n          label=\"课程作者\">\r\n          <a-auto-complete\r\n            class=\"global-search\"\r\n            @select=\"onSelect\"\r\n            @search=\"handleSearch\"\r\n            optionLabelProp=\"text\"\r\n            v-decorator=\"['selected',{ rules: [{ required: true, message: '请输入作者名称' }] }]\"\r\n            placeholder=\"请输入作者名称\"\r\n          >\r\n            <template slot=\"dataSource\">\r\n              <a-select-option v-for=\"item in dataSource\" :key=\"item.userId\" :text=\"item.nickName\" :value=\"String(item.userId)\" class=\"selece-option\">\r\n                <a-avatar :src=\"item.header\" :srcSet=\"item.header\" style=\"margin-right: 15px\"></a-avatar>\r\n                {{ item.nickName }}\r\n              </a-select-option>\r\n            </template>\r\n            <a-input class=\"associate_input\">\r\n              <a-button slot=\"suffix\" class=\"search-btn\" type=\"primary\" size=\"large\" @click=\"beginSearch\">\r\n                <a-icon type=\"search\"></a-icon>\r\n              </a-button>\r\n            </a-input>\r\n          </a-auto-complete>\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-spin>\r\n  \r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\n  import { getAction } from \"@api/manage\";\r\n\r\n  export default {\r\n    name: \"AssociatedModal\",\r\n    data () {\r\n      return {\r\n        appUserId: null,\r\n        userId: null,\r\n        visible: false,\r\n        confirmLoading: false,\r\n        form: this.$form.createForm(this),\r\n        labelCol: {\r\n          xs: { span: 24 },\r\n          sm: { span: 5 },\r\n        },\r\n        wrapperCol: {\r\n          xs: { span: 24 },\r\n          sm: { span: 16 },\r\n        },\r\n        searchParam: '',    // 搜索字段\r\n        selectParam: '',    //  选中作者\r\n        dataSource: [],     // 选择数据源\r\n        url: {\r\n          searchUrl: '/system/appuserinfo/getUserBYPhoneOrCodeOrNickName',\r\n          // associUrl: '/sys/user/checkuser',\r\n          // updateId: '/sys/user/updateSysUserToAppUserId'\r\n        }\r\n        \r\n      }\r\n    },\r\n    methods: {\r\n      show () {\r\n        this.form.resetFields();\r\n        // this.userId = id;\r\n        this.visible = true\r\n      },\r\n      // 表单提交\r\n      handleOk () {\r\n        // 验证用户是否已进行了关联\r\n        this.form.validateFields((err) => {\r\n          if (!err) {\r\n            this.confirmLoading = true;\r\n            let seleData = {\r\n              authorName: this.selectParam,\r\n              author: this.appUserId\r\n            }\r\n            this.$emit('ok', seleData);\r\n\r\n            this.confirmLoading = false;\r\n            this.handleCancel();\r\n            // getAction(this.url.associUrl, { appUserId: this.appUserId }).then(res => {\r\n            //   if(res.success) {\r\n            //     getAction(this.url.updateId, { appUserId: this.appUserId, userId: this.userId }).then(res => {\r\n            //       if (res.success) {\r\n            //         this.$message.success(res.message);\r\n            //         this.$emit('ok');\r\n            //       }else{\r\n            //         this.$message.warning(res.message);\r\n            //       }\r\n            //     }).finally(() => {\r\n            //\r\n            //     })\r\n            //   } else {\r\n            //     this.$message.warning(res.message)\r\n            //   }\r\n            // }).catch(err => {\r\n            //   this.$message.warning(err.message)\r\n            // })\r\n          }\r\n        })\r\n      },\r\n      // modal取消\r\n      handleCancel () {\r\n        this.$emit('close');\r\n        this.dataSource = [];\r\n        this.searchParam = '';\r\n        this.visible = false;\r\n      },\r\n    //  输入选择框\r\n      onSelect (value) {\r\n        console.log(value)\r\n        this.dataSource.forEach(item => {\r\n          if (item.userId === Number(value)) {\r\n            this.selectParam = item.nickName;\r\n            this.appUserId = value\r\n          }\r\n        })\r\n      },\r\n      handleSearch(value) {\r\n        this.searchParam = value\r\n      },\r\n    //  开始搜索\r\n      beginSearch () {\r\n        getAction(this.url.searchUrl, {searchParam: this.searchParam}).then(res => {\r\n          console.log(res)\r\n          if (res.success) {\r\n            if (res.result.length === 0) {\r\n              this.$message.warning('暂无数据')\r\n            } else {\r\n              this.dataSource = res.result\r\n            }\r\n          } else {\r\n            this.$message.warning(res.message)\r\n          }\r\n        }).catch(err => {\r\n          this.$message.warning(err.message)\r\n        })\r\n      }    \r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .global-search .associate_input .ant-input-suffix {\r\n    right: 0 !important;\r\n  }\r\n  .global-search .ant-input-suffix .ant-btn-lg {\r\n    height: 32px;\r\n  }\r\n  .global-search .ant-input-affix-wrapper .ant-input:not(:last-child) {\r\n    padding: 0 50px 0 12px;\r\n  }\r\n  \r\n  .global-search.ant-select-auto-complete .ant-input-affix-wrapper .ant-input-suffix button {\r\n    border-top-left-radius: 0;\r\n    border-bottom-left-radius: 0;\r\n  }\r\n  .selece-option {\r\n    padding: 10px 10px;\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n</style>"]}]}