{"remainingRequest":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\src\\views\\platform\\modules\\VipRetailModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\src\\views\\platform\\modules\\VipRetailModal.vue","mtime":1588673568229},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport { httpAction } from \"@/api/manage\";\nimport pick from \"lodash.pick\";\n\nexport default {\n  name: \"VipRetailModal\",\n  data() {\n    return {\n      title: \"操作\",\n      visible: false,\n      model: {},\n      labelCol: {\n        xs: { span: 24 },\n        sm: { span: 5 }\n      },\n      wrapperCol: {\n        xs: { span: 24 },\n        sm: { span: 16 }\n      },\n\n      confirmLoading: false,\n      disableSubmit: false,\n      form: this.$form.createForm(this),\n      validatorRules: {},\n      url: {\n        edit: \"/other/vipFenxiao/edit\"\n      }\n    };\n  },\n  created() {},\n  methods: {\n    makeNumber(rule, value, callback) {\n      if (value < 0 || value > 100) {\n        callback(\"数值应在0-100之间\");\n      } else {\n        callback();\n      }\n    },\n    add() {\n      this.edit({});\n    },\n    edit(record) {\n      this.form.resetFields();\n      this.model = Object.assign({}, record);\n      this.visible = true;\n      this.$nextTick(() => {\n        // this.$nextTick：等你页面刷新完之后，再执行回调函数中的方法\n        this.form.setFieldsValue(\n          pick(\n            this.model,\n            \"identity\",\n            \"directly\",\n            \"indirect\",\n            \"guide\",\n            \"autherSuper\",\n            \"forwarding\",\n            \"freeReward\",\n            \"directlyHigh\",\n            \"indirectHigh\"\n          )\n        );\n        // pick：返回一个只有列入挑选key属性的对象。其中，参数object为JSON格式的对象，*keys表示多个需要挑选出来的key属性。\n      });\n    },\n    close() {\n      this.$emit(\"close\");\n      this.visible = false;\n    },\n    handleOk() {\n      const that = this;\n      // 触发表单验证\n      this.form.validateFields((err, values) => {\n        if (!err) {\n          that.confirmLoading = true;\n          let httpurl = \"\";\n          let method = \"\";\n          if (!this.model.id) {\n            httpurl += this.url.add;\n            method = \"post\";\n          } else {\n            httpurl += this.url.edit;\n            method = \"put\";\n          }\n          let formData = Object.assign(this.model, values);\n          //时间格式化\n          console.log(formData);\n          httpAction(httpurl, formData, method)\n            .then(res => {\n              if (res.success) {\n                that.$message.success(res.message);\n                that.$emit(\"ok\");\n              } else {\n                that.$message.warning(res.message);\n              }\n            })\n            .finally(() => {\n              that.confirmLoading = false;\n              that.close();\n            });\n        }\n      });\n    },\n    handleCancel() {\n      this.close();\n    }\n  }\n};\n",{"version":3,"sources":["VipRetailModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"VipRetailModal.vue","sourceRoot":"src/views/platform/modules","sourcesContent":["<template>\n  <a-modal\n    :title=\"title\"\n    :width=\"600\"\n    :visible=\"visible\"\n    :confirmLoading=\"confirmLoading\"\n    :okButtonProps=\"{ props: {disabled: disableSubmit} }\"\n    @ok=\"handleOk\"\n    @cancel=\"handleCancel\"\n    cancelText=\"关闭\"\n  >\n    <a-spin :spinning=\"confirmLoading\">\n      <a-form :form=\"form\">\n        <a-form-item :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\" label=\"分销角色\">\n          <a-input\n            style=\"margin-left:51px\"\n            placeholder=\"请输入分类名称\"\n            v-decorator=\"['identity', {}]\"\n            disabled\n          />\n        </a-form-item>\n        <a-form-item :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\" label=\"直推\">\n          <a-input-number\n            style=\"margin-left:51px\"\n            v-decorator=\"[ 'directly', {rules: [{ required: true,message: '请输入直推' }, { validator: makeNumber}]}]\"\n            :disabled=\"disableSubmit\"\n          />\n        </a-form-item>\n        <a-form-item :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\" label=\"间推\">\n          <a-input-number\n            style=\"margin-left:51px\"\n            v-decorator=\"[ 'indirect', {rules: [{ required: true,message: '请输入间推' }, { validator: makeNumber}]}]\"\n            :disabled=\"disableSubmit\"\n          />\n        </a-form-item>\n        <a-form-item\n          :labelCol=\"labelCol\"\n          :wrapperCol=\"wrapperCol\"\n          label=\"直推创客达人或大使\"\n          style=\"width:800px\"\n        >\n          <a-input-number\n            v-decorator=\"[ 'directlyHigh', {rules: [{ required: true,message: '请输入直推创客达人或大使' }, { validator: makeNumber}]}]\"\n            :disabled=\"disableSubmit\"\n          />\n        </a-form-item>\n        <a-form-item\n          :labelCol=\"labelCol\"\n          :wrapperCol=\"wrapperCol\"\n          label=\"间推创客达人或大使\"\n          style=\"width:800px\"\n        >\n          <a-input-number\n            v-decorator=\"[ 'indirectHigh', {rules: [{ required: true,message: '请输入间推创客达人或大使' }, { validator: makeNumber}]}]\"\n            :disabled=\"disableSubmit\"\n          />\n        </a-form-item>\n        <a-form-item\n          :labelCol=\"labelCol\"\n          :wrapperCol=\"wrapperCol\"\n          label=\"课程引导奖\"\n          style=\"margin-left:20px\"\n        >\n          <a-input-number\n            style=\"margin-left:35px\"\n            v-decorator=\"[ 'guide', {rules: [{ required: true,message: '请输入课程引导奖' }, { validator: makeNumber}]}]\"\n            :disabled=\"disableSubmit\"\n          />\n        </a-form-item>\n        <a-form-item\n          :labelCol=\"labelCol\"\n          :wrapperCol=\"wrapperCol\"\n          label=\"课程发布者师傅\"\n          style=\"margin-left:20px\"\n        >\n          <a-input-number\n            style=\"margin-left:35px\"\n            v-decorator=\"[ 'autherSuper', {rules: [{ required: true,message: '请输入课程发布者师傅' }, { validator: makeNumber}]}]\"\n            :disabled=\"disableSubmit\"\n          />\n        </a-form-item>\n        <a-form-item :labelCol=\"labelCol\" :wrapperCol=\"wrapperCol\" label=\"转发者\">\n          <a-input-number\n            style=\"margin-left:51px\"\n            v-decorator=\"[ 'forwarding', {rules: [{ required: true,message: '请输入转发者' }, { validator: makeNumber}]}]\"\n            :disabled=\"disableSubmit\"\n          />\n        </a-form-item>\n        <a-form-item\n          :labelCol=\"labelCol\"\n          :wrapperCol=\"wrapperCol\"\n          label=\"免费奖励\"\n          style=\"margin-left:10px\"\n        >\n          <a-input-number\n            style=\"margin-left:41px\"\n            v-decorator=\"[ 'freeReward', {rules: [{ required: true,message: '请输入免费奖励' }, { validator: makeNumber}]}]\"\n            :disabled=\"disableSubmit\"\n          />\n        </a-form-item>\n      </a-form>\n    </a-spin>\n  </a-modal>\n</template>\n\n<script>\nimport { httpAction } from \"@/api/manage\";\nimport pick from \"lodash.pick\";\n\nexport default {\n  name: \"VipRetailModal\",\n  data() {\n    return {\n      title: \"操作\",\n      visible: false,\n      model: {},\n      labelCol: {\n        xs: { span: 24 },\n        sm: { span: 5 }\n      },\n      wrapperCol: {\n        xs: { span: 24 },\n        sm: { span: 16 }\n      },\n\n      confirmLoading: false,\n      disableSubmit: false,\n      form: this.$form.createForm(this),\n      validatorRules: {},\n      url: {\n        edit: \"/other/vipFenxiao/edit\"\n      }\n    };\n  },\n  created() {},\n  methods: {\n    makeNumber(rule, value, callback) {\n      if (value < 0 || value > 100) {\n        callback(\"数值应在0-100之间\");\n      } else {\n        callback();\n      }\n    },\n    add() {\n      this.edit({});\n    },\n    edit(record) {\n      this.form.resetFields();\n      this.model = Object.assign({}, record);\n      this.visible = true;\n      this.$nextTick(() => {\n        // this.$nextTick：等你页面刷新完之后，再执行回调函数中的方法\n        this.form.setFieldsValue(\n          pick(\n            this.model,\n            \"identity\",\n            \"directly\",\n            \"indirect\",\n            \"guide\",\n            \"autherSuper\",\n            \"forwarding\",\n            \"freeReward\",\n            \"directlyHigh\",\n            \"indirectHigh\"\n          )\n        );\n        // pick：返回一个只有列入挑选key属性的对象。其中，参数object为JSON格式的对象，*keys表示多个需要挑选出来的key属性。\n      });\n    },\n    close() {\n      this.$emit(\"close\");\n      this.visible = false;\n    },\n    handleOk() {\n      const that = this;\n      // 触发表单验证\n      this.form.validateFields((err, values) => {\n        if (!err) {\n          that.confirmLoading = true;\n          let httpurl = \"\";\n          let method = \"\";\n          if (!this.model.id) {\n            httpurl += this.url.add;\n            method = \"post\";\n          } else {\n            httpurl += this.url.edit;\n            method = \"put\";\n          }\n          let formData = Object.assign(this.model, values);\n          //时间格式化\n          console.log(formData);\n          httpAction(httpurl, formData, method)\n            .then(res => {\n              if (res.success) {\n                that.$message.success(res.message);\n                that.$emit(\"ok\");\n              } else {\n                that.$message.warning(res.message);\n              }\n            })\n            .finally(() => {\n              that.confirmLoading = false;\n              that.close();\n            });\n        }\n      });\n    },\n    handleCancel() {\n      this.close();\n    }\n  }\n};\n</script>\n\n<style lang=\"less\" scoped>\n</style>\n"]}]}