{"remainingRequest":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_thread-loader@2.1.3@thread-loader\\dist\\cjs.js!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js??ref--0-0!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\src\\views\\system\\modules\\AssociatedModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\src\\views\\system\\modules\\AssociatedModal.vue","mtime":1590406424954},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_thread-loader@2.1.3@thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getAction } from \"@api/manage\";\nexport default {\n  name: \"AssociatedModal\",\n  data: function data() {\n    return {\n      appUserId: null,\n      userId: null,\n      visible: false,\n      confirmLoading: false,\n      form: this.$form.createForm(this),\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 5\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 16\n        }\n      },\n      searchParam: '',\n      // 搜索字段\n      selectParam: '',\n      //  选中作者\n      dataSource: [],\n      // 选择数据源\n      url: {\n        searchUrl: '/system/appuserinfo/getUserBYPhoneOrCodeOrNickName' // associUrl: '/sys/user/checkuser',\n        // updateId: '/sys/user/updateSysUserToAppUserId'\n\n      }\n    };\n  },\n  methods: {\n    show: function show() {\n      this.form.resetFields(); // this.userId = id;\n\n      this.visible = true;\n    },\n    // 表单提交\n    handleOk: function handleOk() {\n      var _this = this;\n\n      // 验证用户是否已进行了关联\n      this.form.validateFields(function (err) {\n        if (!err) {\n          _this.confirmLoading = true;\n          var seleData = {\n            authorName: _this.selectParam,\n            author: _this.appUserId\n          };\n\n          _this.$emit('ok', seleData);\n\n          _this.confirmLoading = false;\n\n          _this.handleCancel(); // getAction(this.url.associUrl, { appUserId: this.appUserId }).then(res => {\n          //   if(res.success) {\n          //     getAction(this.url.updateId, { appUserId: this.appUserId, userId: this.userId }).then(res => {\n          //       if (res.success) {\n          //         this.$message.success(res.message);\n          //         this.$emit('ok');\n          //       }else{\n          //         this.$message.warning(res.message);\n          //       }\n          //     }).finally(() => {\n          //\n          //     })\n          //   } else {\n          //     this.$message.warning(res.message)\n          //   }\n          // }).catch(err => {\n          //   this.$message.warning(err.message)\n          // })\n\n        }\n      });\n    },\n    // modal取消\n    handleCancel: function handleCancel() {\n      this.$emit('close');\n      this.dataSource = [];\n      this.searchParam = '';\n      this.visible = false;\n    },\n    //  输入选择框\n    onSelect: function onSelect(value) {\n      var _this2 = this;\n\n      console.log(value);\n      this.dataSource.forEach(function (item) {\n        if (item.userId === Number(value)) {\n          _this2.selectParam = item.nickName;\n          _this2.appUserId = value;\n        }\n      });\n    },\n    handleSearch: function handleSearch(value) {\n      this.searchParam = value;\n    },\n    //  开始搜索\n    beginSearch: function beginSearch() {\n      var _this3 = this;\n\n      getAction(this.url.searchUrl, {\n        searchParam: this.searchParam\n      }).then(function (res) {\n        console.log(res);\n\n        if (res.success) {\n          if (res.result.length === 0) {\n            _this3.$message.warning('暂无数据');\n          } else {\n            _this3.dataSource = res.result;\n          }\n        } else {\n          _this3.$message.warning(res.message);\n        }\n      }).catch(function (err) {\n        _this3.$message.warning(err.message);\n      });\n    }\n  }\n};",null]}