{"remainingRequest":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_eslint-loader@2.2.1@eslint-loader\\index.js??ref--13-0!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\src\\mixins\\JeecgListMixin.js","dependencies":[{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\src\\mixins\\JeecgListMixin.js","mtime":1594019222529},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_eslint-loader@2.2.1@eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport _defineProperty from \"E:/gitweb/vcloudsapce_web/ant-design-vue-jeecg/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/web.dom.iterable\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/**\n * 新增修改完成调用 modalFormOk方法 编辑弹框组件ref定义为modalForm\n * 高级查询按钮调用 superQuery方法  高级查询组件ref定义为superQueryModal\n * data中url定义 list为查询列表  delete为删除单条记录  deleteBatch为批量删除\n */\nimport { filterObj } from '@/utils/util';\nimport { deleteAction, getAction, downFile, httpAction } from '@/api/manage';\nimport Vue from 'vue';\nimport { ACCESS_TOKEN } from \"@/store/mutation-types\";\nimport * as qiniu from 'qiniu-js';\nexport var JeecgListMixin = {\n  data: function data() {\n    return {\n      //token header\n      tokenHeader: {\n        'X-Access-Token': Vue.ls.get(ACCESS_TOKEN)\n      },\n\n      /* 查询条件-请不要在queryParam中声明非字符串值的属性 */\n      queryParam: {},\n\n      /* 数据源 */\n      dataSource: [],\n\n      /* 分页参数 */\n      ipagination: {\n        current: 1,\n        pageSize: 10,\n        pageSizeOptions: ['10', '20', '30'],\n        showTotal: function showTotal(total, range) {\n          return range[0] + \"-\" + range[1] + \" 共\" + total + \"条\";\n        },\n        showQuickJumper: true,\n        showSizeChanger: true,\n        total: 0\n      },\n\n      /* 排序参数 */\n      isorter: {\n        column: 'createTime',\n        order: 'desc'\n      },\n\n      /* 筛选参数 */\n      filters: {},\n\n      /* table加载状态 */\n      loading: false,\n\n      /* table选中keys*/\n      selectedRowKeys: [],\n\n      /* table选中records*/\n      selectionRows: [],\n\n      /* 查询折叠 */\n      toggleSearchStatus: false,\n\n      /* 高级查询条件生效状态 */\n      superQueryFlag: false,\n\n      /* 高级查询条件 */\n      superQueryParams: \"\",\n      url: {\n        fileUpload: window._CONFIG['domianQiNiu'],\n        qiniuToken: '/qiniuUpToken'\n      }\n    };\n  },\n  created: function created() {\n    this.loadData(); //初始化字典配置 在自己页面定义\n\n    this.initDictConfig();\n  },\n  methods: {\n    loadData: function loadData(arg) {\n      var _this = this;\n\n      if (!this.url.list) {\n        this.$message.error(\"请设置url.list属性!\");\n        return;\n      } //加载数据 若传入参数1则加载第一页的内容\n\n\n      if (arg === 1) {\n        this.ipagination.current = 1;\n      }\n\n      var params = this.getQueryParams(); //查询条件\n\n      this.loading = true;\n      getAction(this.url.list, params).then(function (res) {\n        if (res.success) {\n          if (_this.type === 'ambassadorList' || _this.type === 'ambassadorList1') {\n            _this.dataSource = res.result.date.records;\n            _this.ipagination.total = res.result.date.total;\n            _this.total = res.result.total;\n          } else {\n            _this.state = res.result.records.state;\n            _this.dataSource = res.result.records;\n            _this.ipagination.total = res.result.total;\n            _this.total = res.result.total;\n          }\n\n          console.log(res);\n        }\n\n        if (res.code === 510) {\n          _this.$message.warning(res.message);\n        }\n\n        _this.loading = false;\n      });\n    },\n    //  图片点击放大\n    bigImg: function bigImg(text, width) {\n      if (text) {\n        this.$refs.bigImg.make(text, width);\n      }\n    },\n    initDictConfig: function initDictConfig() {\n      console.log(\"--这是一个假的方法!\");\n    },\n    handleSuperQuery: function handleSuperQuery(arg) {\n      //高级查询方法\n      if (!arg) {\n        this.superQueryParams = '';\n        this.superQueryFlag = false;\n      } else {\n        this.superQueryFlag = true;\n        this.superQueryParams = JSON.stringify(arg);\n      }\n\n      this.loadData();\n    },\n    getQueryParams: function getQueryParams() {\n      //获取查询条件\n      var sqp = {};\n\n      if (this.superQueryParams) {\n        sqp['superQueryParams'] = encodeURI(this.superQueryParams);\n      }\n\n      if (this.fenxiao) {\n        this.isorter = this.vipsorter;\n      }\n\n      var param = Object.assign(sqp, this.queryParam, this.isorter, this.filters);\n      console.log('param');\n      console.log(param);\n      param.field = this.getQueryField();\n      param.pageNo = this.ipagination.current;\n      param.pageSize = this.ipagination.pageSize;\n      return filterObj(param);\n    },\n    getQueryField: function getQueryField() {\n      //TODO 字段权限控制\n      var str = \"id,\";\n      this.columns.forEach(function (value) {\n        str += \",\" + value.dataIndex;\n      });\n      return str;\n    },\n    onSelectChange: function onSelectChange(selectedRowKeys, selectionRows) {\n      this.selectedRowKeys = selectedRowKeys;\n      this.selectionRows = selectionRows;\n    },\n    onClearSelected: function onClearSelected() {\n      this.selectedRowKeys = [];\n      this.selectionRows = [];\n    },\n    searchQuery: function searchQuery() {\n      this.loadData(1);\n    },\n    superQuery: function superQuery() {\n      this.$refs.superQueryModal.show();\n    },\n    searchReset: function searchReset() {\n      this.queryParam = this.param || {};\n      this.loadData(1);\n    },\n    batchDel: function batchDel() {\n      if (!this.url.deleteBatch) {\n        this.$message.error(\"请设置url.deleteBatch属性!\");\n        return;\n      }\n\n      if (this.selectedRowKeys.length <= 0) {\n        this.$message.warning('请选择一条记录！');\n        return;\n      } else {\n        var ids = \"\";\n\n        for (var a = 0; a < this.selectedRowKeys.length; a++) {\n          ids += this.selectedRowKeys[a] + \",\";\n        }\n\n        var that = this;\n        this.$confirm({\n          title: \"确认删除\",\n          content: \"是否删除选中数据?\",\n          onOk: function onOk() {\n            deleteAction(that.url.deleteBatch, {\n              ids: ids\n            }).then(function (res) {\n              if (res.success) {\n                that.$message.success(res.message);\n                that.loadData();\n                that.onClearSelected();\n              } else {\n                that.$message.warning(res.message);\n              }\n            });\n          }\n        });\n      }\n    },\n    handleDelete: function handleDelete(id) {\n      if (!this.url.delete) {\n        this.$message.error(\"请设置url.delete属性!\");\n        return;\n      }\n\n      var that = this;\n      deleteAction(that.url.delete, {\n        id: id\n      }).then(function (res) {\n        if (res.success) {\n          that.$message.success(res.message);\n          that.loadData();\n        } else {\n          that.$message.warning(res.message);\n        }\n      });\n    },\n    handleEdit: function handleEdit(record) {\n      console.log(record);\n      this.$refs.modalForm.edit(record);\n      this.$refs.modalForm.title = \"编辑\";\n      this.$refs.modalForm.disableSubmit = false;\n    },\n    handleAdd: function handleAdd() {\n      this.$refs.modalForm.add();\n      this.$refs.modalForm.title = \"新增\";\n      this.$refs.modalForm.disableSubmit = false;\n    },\n    // 图片上传根据状态赋值\n    uploadChange: function uploadChange(info) {\n      if (info.file.status === 'uploading') {\n        this.loading = true;\n        return;\n      }\n\n      if (info.file.status === 'done') {\n        var response = info.file.response;\n        this.value = response.data[0];\n        this.loading = false;\n      }\n\n      if (info.file.status === 'removed') {\n        this.coverimg = '';\n      }\n    },\n    // 自定义上传\n    setCustomRequest: function setCustomRequest(data) {\n      var _this2 = this;\n\n      var suffix = \".\" + data.file.name.replace(/^.+\\./, ''); //请求token\n\n      httpAction(this.url.qiniuToken, {}, 'post').then(function (res) {\n        if (res) {\n          var token = res.data.token;\n          var file = data.file;\n          var key = new Date().getTime() + suffix;\n          var domain = _this2.url.fileUpload;\n          var config = {\n            useCdnDomain: true,\n            region: null\n          };\n          var putExtra = {\n            fname: '',\n            params: {},\n            mimeType: null\n          };\n          var observable = qiniu.upload(file, key, token, putExtra, config);\n          observable.subscribe({\n            next: function next(res) {\n              _this2.loading = true;\n              _this2.percent = res.total.percent.toFixed(2);\n              _this2.coverimg = '';\n              _this2.value = '';\n            },\n            error: function error() {\n              _this2.$message.error('上传失败');\n\n              _this2.loading = false;\n              _this2.coverimg = _this2.canimg;\n            },\n            complete: function complete(response) {\n              _this2.coverimg = \"\".concat(domain, \"/\").concat(response.key);\n              _this2.value = \"\".concat(domain, \"/\").concat(response.key);\n              _this2.loading = false;\n            }\n          });\n        }\n      });\n    },\n    handleTableChange: function handleTableChange(pagination, filters, sorter) {\n      //分页、排序、筛选变化时触发\n      //TODO 筛选\n      if (Object.keys(sorter).length > 0) {\n        this.isorter.column = sorter.field;\n        this.isorter.order = \"ascend\" == sorter.order ? \"asc\" : \"desc\";\n      }\n\n      this.ipagination = pagination;\n      this.loadData();\n    },\n    handleToggleSearch: function handleToggleSearch() {\n      this.toggleSearchStatus = !this.toggleSearchStatus;\n    },\n    modalFormOk: function modalFormOk() {\n      // 新增/修改 成功时，重载列表\n      this.loadData();\n    },\n    handleDetail: function handleDetail(record) {\n      this.$refs.modalForm.edit(record);\n      this.$refs.modalForm.title = \"详情\";\n      this.$refs.modalForm.disableSubmit = true;\n    },\n\n    /* 导出 */\n    handleExportXls2: function handleExportXls2() {\n      var paramsStr = encodeURI(JSON.stringify(this.getQueryParams()));\n      var url = \"\".concat(window._CONFIG['domianURL'], \"/\").concat(this.url.exportXlsUrl, \"?paramsStr=\").concat(paramsStr);\n      window.location.href = url;\n    },\n    handleExportXls: function handleExportXls(fileName) {\n      var _this3 = this;\n\n      if (!fileName || typeof fileName != \"string\") {\n        fileName = \"导出文件\";\n      }\n\n      var param = _objectSpread({}, this.queryParam);\n\n      if (this.selectedRowKeys && this.selectedRowKeys.length > 0) {\n        param['selections'] = this.selectedRowKeys.join(\",\");\n      }\n\n      console.log(\"导出参数\", param);\n      downFile(this.url.exportXlsUrl, param).then(function (data) {\n        if (!data) {\n          _this3.$message.warning(\"文件下载失败\");\n\n          return;\n        }\n\n        if (typeof window.navigator.msSaveBlob !== 'undefined') {\n          window.navigator.msSaveBlob(new Blob([data]), fileName + '.xls');\n        } else {\n          var url = window.URL.createObjectURL(new Blob([data]));\n          var link = document.createElement('a');\n          link.style.display = 'none';\n          link.href = url;\n          link.setAttribute('download', fileName + '.xls');\n          document.body.appendChild(link);\n          link.click();\n          document.body.removeChild(link); //下载完成移除元素\n\n          window.URL.revokeObjectURL(url); //释放掉blob对象\n        }\n      });\n    },\n\n    /* 导入 */\n    handleImportExcel: function handleImportExcel(info) {\n      if (info.file.status !== 'uploading') {\n        console.log(info.file, info.fileList);\n      }\n\n      if (info.file.status === 'done') {\n        if (info.file.response.success) {\n          this.$message.success(\"\".concat(info.file.name, \" \\u6587\\u4EF6\\u4E0A\\u4F20\\u6210\\u529F\"));\n          this.loadData();\n        } else {\n          this.$message.error(\"\".concat(info.file.name, \" \").concat(info.file.response.message, \".\"));\n        }\n      } else if (info.file.status === 'error') {\n        this.$message.error(\"\\u6587\\u4EF6\\u4E0A\\u4F20\\u5931\\u8D25: \".concat(info.file.msg, \" \"));\n      }\n    },\n\n    /* 图片预览 */\n    getImgView: function getImgView(text) {\n      if (text && text.indexOf(\",\") > 0) {\n        text = text.substring(0, text.indexOf(\",\"));\n      }\n\n      return window._CONFIG['imgDomainURL'] + \"/\" + text;\n    },\n\n    /* 文件下载 */\n    uploadFile: function uploadFile(text) {\n      if (!text) {\n        this.$message.warning(\"未知的文件\");\n        return;\n      }\n\n      if (text.indexOf(\",\") > 0) {\n        text = text.substring(0, text.indexOf(\",\"));\n      }\n\n      window.open(window._CONFIG['domianURL'] + \"/sys/common/download/\" + text);\n    }\n  }\n};",{"version":3,"sources":["E:/gitweb/vcloudsapce_web/ant-design-vue-jeecg/src/mixins/JeecgListMixin.js"],"names":["filterObj","deleteAction","getAction","downFile","httpAction","Vue","ACCESS_TOKEN","qiniu","JeecgListMixin","data","tokenHeader","ls","get","queryParam","dataSource","ipagination","current","pageSize","pageSizeOptions","showTotal","total","range","showQuickJumper","showSizeChanger","isorter","column","order","filters","loading","selectedRowKeys","selectionRows","toggleSearchStatus","superQueryFlag","superQueryParams","url","fileUpload","window","_CONFIG","qiniuToken","created","loadData","initDictConfig","methods","arg","list","$message","error","params","getQueryParams","then","res","success","type","result","date","records","state","console","log","code","warning","message","bigImg","text","width","$refs","make","handleSuperQuery","JSON","stringify","sqp","encodeURI","fenxiao","vipsorter","param","Object","assign","field","getQueryField","pageNo","str","columns","forEach","value","dataIndex","onSelectChange","onClearSelected","searchQuery","superQuery","superQueryModal","show","searchReset","batchDel","deleteBatch","length","ids","a","that","$confirm","title","content","onOk","handleDelete","id","delete","handleEdit","record","modalForm","edit","disableSubmit","handleAdd","add","uploadChange","info","file","status","response","coverimg","setCustomRequest","suffix","name","replace","token","key","Date","getTime","domain","config","useCdnDomain","region","putExtra","fname","mimeType","observable","upload","subscribe","next","percent","toFixed","canimg","complete","handleTableChange","pagination","sorter","keys","handleToggleSearch","modalFormOk","handleDetail","handleExportXls2","paramsStr","exportXlsUrl","location","href","handleExportXls","fileName","join","navigator","msSaveBlob","Blob","URL","createObjectURL","link","document","createElement","style","display","setAttribute","body","appendChild","click","removeChild","revokeObjectURL","handleImportExcel","fileList","msg","getImgView","indexOf","substring","uploadFile","open"],"mappings":"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","sourcesContent":["/**\n * 新增修改完成调用 modalFormOk方法 编辑弹框组件ref定义为modalForm\n * 高级查询按钮调用 superQuery方法  高级查询组件ref定义为superQueryModal\n * data中url定义 list为查询列表  delete为删除单条记录  deleteBatch为批量删除\n */\nimport { filterObj } from '@/utils/util';\nimport { deleteAction, getAction,downFile, httpAction } from '@/api/manage'\nimport Vue from 'vue'\nimport { ACCESS_TOKEN } from \"@/store/mutation-types\"\nimport * as qiniu from 'qiniu-js'\n\nexport const JeecgListMixin = {\n  data(){\n    return {\n      //token header\n      tokenHeader: {'X-Access-Token': Vue.ls.get(ACCESS_TOKEN)},\n      /* 查询条件-请不要在queryParam中声明非字符串值的属性 */\n      queryParam: {},\n      /* 数据源 */\n      dataSource:[],\n      /* 分页参数 */\n      ipagination:{\n        current: 1,\n        pageSize: 10,\n        pageSizeOptions: ['10', '20', '30'],\n        showTotal: (total, range) => {\n          return range[0] + \"-\" + range[1] + \" 共\" + total + \"条\"\n        },\n        showQuickJumper: true,\n        showSizeChanger: true,\n        total: 0\n      },\n      /* 排序参数 */\n      isorter:{\n        column: 'createTime',\n        order: 'desc',\n      },\n      /* 筛选参数 */\n      filters: {},\n      /* table加载状态 */\n      loading:false,\n      /* table选中keys*/\n      selectedRowKeys: [],\n      /* table选中records*/\n      selectionRows: [],\n      /* 查询折叠 */\n      toggleSearchStatus:false,\n      /* 高级查询条件生效状态 */\n      superQueryFlag:false,\n      /* 高级查询条件 */\n      superQueryParams:\"\",\n      url: {\n        fileUpload: window._CONFIG['domianQiNiu'],\n        qiniuToken: '/qiniuUpToken'\n      }\n    }\n  },\n  created() {\n    this.loadData();\n    //初始化字典配置 在自己页面定义\n    this.initDictConfig();\n  },\n  methods:{\n    loadData(arg) {\n      if(!this.url.list){\n        this.$message.error(\"请设置url.list属性!\")\n        return\n      }\n      //加载数据 若传入参数1则加载第一页的内容\n      if (arg === 1) {\n        this.ipagination.current = 1;\n      }\n      var params = this.getQueryParams();//查询条件\n      this.loading = true;\n      \n      getAction(this.url.list, params).then((res) => {\n        if (res.success) {\n          if (this.type === 'ambassadorList' || this.type === 'ambassadorList1') {\n            this.dataSource = res.result.date.records;\n            this.ipagination.total = res.result.date.total;\n            this.total = res.result.total;\n          } else {\n            this.state = res.result.records.state\n            this.dataSource = res.result.records;\n            this.ipagination.total = res.result.total;\n            this.total = res.result.total;\n          }\n          console.log(res)\n\n        }\n        if(res.code===510){\n          this.$message.warning(res.message)\n        }\n        this.loading = false;\n      })\n    },\n    //  图片点击放大\n    bigImg (text, width) {\n      if(text) {\n        this.$refs.bigImg.make(text, width);\n      }\n    },\n    initDictConfig(){\n      console.log(\"--这是一个假的方法!\")\n    },\n    handleSuperQuery(arg) {\n      //高级查询方法\n      if(!arg){\n        this.superQueryParams=''\n        this.superQueryFlag = false\n      }else{\n        this.superQueryFlag = true\n        this.superQueryParams=JSON.stringify(arg)\n      }\n      this.loadData()\n    },\n    getQueryParams() {\n      //获取查询条件\n      let sqp = {}\n      if(this.superQueryParams){\n        sqp['superQueryParams']=encodeURI(this.superQueryParams)\n      }\n      if (this.fenxiao) {\n        this.isorter = this.vipsorter;\n      }\n      var param = Object.assign(sqp, this.queryParam, this.isorter ,this.filters);\n      console.log('param')\n      console.log(param)\n      param.field = this.getQueryField();\n      param.pageNo = this.ipagination.current;\n      param.pageSize = this.ipagination.pageSize;\n      return filterObj(param);\n    },\n    getQueryField() {\n      //TODO 字段权限控制\n      var str = \"id,\";\n      this.columns.forEach(function (value) {\n        str += \",\" + value.dataIndex;\n      });\n      return str;\n    },\n\n    onSelectChange(selectedRowKeys, selectionRows) {\n      this.selectedRowKeys = selectedRowKeys;\n      this.selectionRows = selectionRows;\n    },\n    onClearSelected() {\n      this.selectedRowKeys = [];\n      this.selectionRows = [];\n    },\n    searchQuery() {\n      this.loadData(1);\n    },\n    superQuery() {\n      this.$refs.superQueryModal.show();\n    },\n    searchReset() {\n      this.queryParam = this.param || {}\n      this.loadData(1);\n    },\n    batchDel: function () {\n      if(!this.url.deleteBatch){\n        this.$message.error(\"请设置url.deleteBatch属性!\")\n        return\n      }\n      if (this.selectedRowKeys.length <= 0) {\n        this.$message.warning('请选择一条记录！');\n        return;\n      } else {\n        var ids = \"\";\n        for (var a = 0; a < this.selectedRowKeys.length; a++) {\n          ids += this.selectedRowKeys[a] + \",\";\n        }\n        var that = this;\n        this.$confirm({\n          title: \"确认删除\",\n          content: \"是否删除选中数据?\",\n          onOk: function () {\n            deleteAction(that.url.deleteBatch, {ids: ids}).then((res) => {\n              if (res.success) {\n                that.$message.success(res.message);\n                that.loadData();\n                that.onClearSelected();\n              } else {\n                that.$message.warning(res.message);\n              }\n            });\n          }\n        });\n      }\n    },\n    handleDelete: function (id) {\n      if(!this.url.delete){\n        this.$message.error(\"请设置url.delete属性!\")\n        return\n      }\n      var that = this;\n      deleteAction(that.url.delete, {id: id}).then((res) => {\n        if (res.success) {\n          that.$message.success(res.message);\n          that.loadData();\n        } else {\n          that.$message.warning(res.message);\n        }\n      });\n    },\n    handleEdit: function (record) {\n      console.log(record)\n      this.$refs.modalForm.edit(record);\n      this.$refs.modalForm.title = \"编辑\";\n      this.$refs.modalForm.disableSubmit = false;\n    },\n    handleAdd: function () {\n      this.$refs.modalForm.add();\n      this.$refs.modalForm.title = \"新增\";\n      this.$refs.modalForm.disableSubmit = false;\n    },\n    // 图片上传根据状态赋值\n    uploadChange: function(info) {\n      if (info.file.status === 'uploading') {\n        this.loading = true;\n        return;\n      }\n      if (info.file.status === 'done') {\n        let response = info.file.response;\n        this.value = response.data[0];\n        this.loading = false;\n      }\n      if (info.file.status === 'removed') {\n        this.coverimg = '';\n      }\n    },\n    // 自定义上传\n    setCustomRequest:function (data) {\n      const suffix = \".\" + data.file.name.replace(/^.+\\./, '')\n      //请求token\n      httpAction(this.url.qiniuToken, {}, 'post').then((res) => {\n        if (res) {\n          let token = res.data.token\n          const file = data.file\n          const key = new Date().getTime() + suffix;\n          let domain = this.url.fileUpload\n          let config = {\n            useCdnDomain: true,\n            region: null\n          }\n          let putExtra = {\n            fname: '',\n            params: {},\n            mimeType: null\n          }\n          let observable = qiniu.upload(file, key, token, putExtra, config);\n          observable.subscribe({\n            next: (res) => {\n              this.loading = true;\n              this.percent = res.total.percent.toFixed(2)\n              this.coverimg = '';\n              this.value = '';\n            },\n            error: () => {\n              this.$message.error('上传失败')\n              this.loading = false;\n              this.coverimg = this.canimg\n            },\n            complete: (response) => {\n              this.coverimg = `${domain}/${response.key}`;\n              this.value = `${domain}/${response.key}`;\n              this.loading = false;\n            }\n          })\n        }\n      })\n    },\n    handleTableChange(pagination, filters, sorter) {\n      //分页、排序、筛选变化时触发\n      //TODO 筛选\n      if (Object.keys(sorter).length > 0) {\n        this.isorter.column = sorter.field;\n        this.isorter.order = \"ascend\" == sorter.order ? \"asc\" : \"desc\"\n      }\n      this.ipagination = pagination;\n      this.loadData();\n    },\n    handleToggleSearch(){\n      this.toggleSearchStatus = !this.toggleSearchStatus;\n    },\n    modalFormOk() {\n      // 新增/修改 成功时，重载列表\n      this.loadData();\n    },\n    handleDetail:function(record){\n      this.$refs.modalForm.edit(record);\n      this.$refs.modalForm.title=\"详情\";\n      this.$refs.modalForm.disableSubmit = true;\n    },\n    /* 导出 */\n    handleExportXls2(){\n      let paramsStr = encodeURI(JSON.stringify(this.getQueryParams()));\n      let url = `${window._CONFIG['domianURL']}/${this.url.exportXlsUrl}?paramsStr=${paramsStr}`;\n      window.location.href = url;\n    },\n    handleExportXls(fileName){\n      if(!fileName || typeof fileName != \"string\"){\n        fileName = \"导出文件\"\n      }\n      let param = {...this.queryParam};\n      if(this.selectedRowKeys && this.selectedRowKeys.length>0){\n        param['selections'] = this.selectedRowKeys.join(\",\")\n      }\n      console.log(\"导出参数\",param)\n      downFile(this.url.exportXlsUrl,param).then((data)=>{\n        if (!data) {\n          this.$message.warning(\"文件下载失败\")\n          return\n        }\n        if (typeof window.navigator.msSaveBlob !== 'undefined') {\n          window.navigator.msSaveBlob(new Blob([data]), fileName+'.xls')\n        }else{\n          let url = window.URL.createObjectURL(new Blob([data]))\n          let link = document.createElement('a')\n          link.style.display = 'none'\n          link.href = url\n          link.setAttribute('download', fileName+'.xls')\n          document.body.appendChild(link)\n          link.click()\n          document.body.removeChild(link); //下载完成移除元素\n          window.URL.revokeObjectURL(url); //释放掉blob对象\n        }\n      })\n    },\n    /* 导入 */\n    handleImportExcel(info){\n      if (info.file.status !== 'uploading') {\n        console.log(info.file, info.fileList);\n      }\n      if (info.file.status === 'done') {\n        if(info.file.response.success){\n          this.$message.success(`${info.file.name} 文件上传成功`);\n          this.loadData();\n        } else {\n          this.$message.error(`${info.file.name} ${info.file.response.message}.`);\n        }\n      } else if (info.file.status === 'error') {\n        this.$message.error(`文件上传失败: ${info.file.msg} `);\n      }\n    },\n    /* 图片预览 */\n    getImgView(text){\n      if(text && text.indexOf(\",\")>0){\n        text = text.substring(0,text.indexOf(\",\"))\n      }\n      return window._CONFIG['imgDomainURL']+\"/\"+text\n    },\n    /* 文件下载 */\n    uploadFile(text){\n      if(!text){\n        this.$message.warning(\"未知的文件\")\n        return;\n      }\n      if(text.indexOf(\",\")>0){\n        text = text.substring(0,text.indexOf(\",\"))\n      }\n      window.open(window._CONFIG['domianURL'] + \"/sys/common/download/\"+text);\n    },\n  }\n\n}"]}]}