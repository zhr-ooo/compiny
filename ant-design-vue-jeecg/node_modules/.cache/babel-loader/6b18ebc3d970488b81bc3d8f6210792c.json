{"remainingRequest":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js??ref--0-0!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\src\\views\\system\\modules\\AssociatedModal.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\src\\views\\system\\modules\\AssociatedModal.vue","mtime":1590406424954},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getAction } from \"@api/manage\";\nexport default {\n  name: \"AssociatedModal\",\n  data: function data() {\n    return {\n      appUserId: null,\n      userId: null,\n      visible: false,\n      confirmLoading: false,\n      form: this.$form.createForm(this),\n      labelCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 5\n        }\n      },\n      wrapperCol: {\n        xs: {\n          span: 24\n        },\n        sm: {\n          span: 16\n        }\n      },\n      searchParam: '',\n      // 搜索字段\n      selectParam: '',\n      //  选中作者\n      dataSource: [],\n      // 选择数据源\n      url: {\n        searchUrl: '/system/appuserinfo/getUserBYPhoneOrCodeOrNickName' // associUrl: '/sys/user/checkuser',\n        // updateId: '/sys/user/updateSysUserToAppUserId'\n\n      }\n    };\n  },\n  methods: {\n    show: function show() {\n      this.form.resetFields(); // this.userId = id;\n\n      this.visible = true;\n    },\n    // 表单提交\n    handleOk: function handleOk() {\n      var _this = this;\n\n      // 验证用户是否已进行了关联\n      this.form.validateFields(function (err) {\n        if (!err) {\n          _this.confirmLoading = true;\n          var seleData = {\n            authorName: _this.selectParam,\n            author: _this.appUserId\n          };\n\n          _this.$emit('ok', seleData);\n\n          _this.confirmLoading = false;\n\n          _this.handleCancel(); // getAction(this.url.associUrl, { appUserId: this.appUserId }).then(res => {\n          //   if(res.success) {\n          //     getAction(this.url.updateId, { appUserId: this.appUserId, userId: this.userId }).then(res => {\n          //       if (res.success) {\n          //         this.$message.success(res.message);\n          //         this.$emit('ok');\n          //       }else{\n          //         this.$message.warning(res.message);\n          //       }\n          //     }).finally(() => {\n          //\n          //     })\n          //   } else {\n          //     this.$message.warning(res.message)\n          //   }\n          // }).catch(err => {\n          //   this.$message.warning(err.message)\n          // })\n\n        }\n      });\n    },\n    // modal取消\n    handleCancel: function handleCancel() {\n      this.$emit('close');\n      this.dataSource = [];\n      this.searchParam = '';\n      this.visible = false;\n    },\n    //  输入选择框\n    onSelect: function onSelect(value) {\n      var _this2 = this;\n\n      console.log(value);\n      this.dataSource.forEach(function (item) {\n        if (item.userId === Number(value)) {\n          _this2.selectParam = item.nickName;\n          _this2.appUserId = value;\n        }\n      });\n    },\n    handleSearch: function handleSearch(value) {\n      this.searchParam = value;\n    },\n    //  开始搜索\n    beginSearch: function beginSearch() {\n      var _this3 = this;\n\n      getAction(this.url.searchUrl, {\n        searchParam: this.searchParam\n      }).then(function (res) {\n        console.log(res);\n\n        if (res.success) {\n          if (res.result.length === 0) {\n            _this3.$message.warning('暂无数据');\n          } else {\n            _this3.dataSource = res.result;\n          }\n        } else {\n          _this3.$message.warning(res.message);\n        }\n      }).catch(function (err) {\n        _this3.$message.warning(err.message);\n      });\n    }\n  }\n};",{"version":3,"sources":["AssociatedModal.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA,SAAA,SAAA,QAAA,aAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,iBADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,IADA;AAEA,MAAA,MAAA,EAAA,IAFA;AAGA,MAAA,OAAA,EAAA,KAHA;AAIA,MAAA,cAAA,EAAA,KAJA;AAKA,MAAA,IAAA,EAAA,KAAA,KAAA,CAAA,UAAA,CAAA,IAAA,CALA;AAMA,MAAA,QAAA,EAAA;AACA,QAAA,EAAA,EAAA;AAAA,UAAA,IAAA,EAAA;AAAA,SADA;AAEA,QAAA,EAAA,EAAA;AAAA,UAAA,IAAA,EAAA;AAAA;AAFA,OANA;AAUA,MAAA,UAAA,EAAA;AACA,QAAA,EAAA,EAAA;AAAA,UAAA,IAAA,EAAA;AAAA,SADA;AAEA,QAAA,EAAA,EAAA;AAAA,UAAA,IAAA,EAAA;AAAA;AAFA,OAVA;AAcA,MAAA,WAAA,EAAA,EAdA;AAcA;AACA,MAAA,WAAA,EAAA,EAfA;AAeA;AACA,MAAA,UAAA,EAAA,EAhBA;AAgBA;AACA,MAAA,GAAA,EAAA;AACA,QAAA,SAAA,EAAA,oDADA,CAEA;AACA;;AAHA;AAjBA,KAAA;AAwBA,GA3BA;AA4BA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,kBACA;AACA,WAAA,IAAA,CAAA,WAAA,GADA,CAEA;;AACA,WAAA,OAAA,GAAA,IAAA;AACA,KALA;AAMA;AACA,IAAA,QAPA,sBAOA;AAAA;;AACA;AACA,WAAA,IAAA,CAAA,cAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,CAAA,GAAA,EAAA;AACA,UAAA,KAAA,CAAA,cAAA,GAAA,IAAA;AACA,cAAA,QAAA,GAAA;AACA,YAAA,UAAA,EAAA,KAAA,CAAA,WADA;AAEA,YAAA,MAAA,EAAA,KAAA,CAAA;AAFA,WAAA;;AAIA,UAAA,KAAA,CAAA,KAAA,CAAA,IAAA,EAAA,QAAA;;AAEA,UAAA,KAAA,CAAA,cAAA,GAAA,KAAA;;AACA,UAAA,KAAA,CAAA,YAAA,GATA,CAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA,OA9BA;AA+BA,KAxCA;AAyCA;AACA,IAAA,YA1CA,0BA0CA;AACA,WAAA,KAAA,CAAA,OAAA;AACA,WAAA,UAAA,GAAA,EAAA;AACA,WAAA,WAAA,GAAA,EAAA;AACA,WAAA,OAAA,GAAA,KAAA;AACA,KA/CA;AAgDA;AACA,IAAA,QAjDA,oBAiDA,KAjDA,EAiDA;AAAA;;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA;AACA,WAAA,UAAA,CAAA,OAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,CAAA,MAAA,KAAA,MAAA,CAAA,KAAA,CAAA,EAAA;AACA,UAAA,MAAA,CAAA,WAAA,GAAA,IAAA,CAAA,QAAA;AACA,UAAA,MAAA,CAAA,SAAA,GAAA,KAAA;AACA;AACA,OALA;AAMA,KAzDA;AA0DA,IAAA,YA1DA,wBA0DA,KA1DA,EA0DA;AACA,WAAA,WAAA,GAAA,KAAA;AACA,KA5DA;AA6DA;AACA,IAAA,WA9DA,yBA8DA;AAAA;;AACA,MAAA,SAAA,CAAA,KAAA,GAAA,CAAA,SAAA,EAAA;AAAA,QAAA,WAAA,EAAA,KAAA;AAAA,OAAA,CAAA,CAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,GAAA;;AACA,YAAA,GAAA,CAAA,OAAA,EAAA;AACA,cAAA,GAAA,CAAA,MAAA,CAAA,MAAA,KAAA,CAAA,EAAA;AACA,YAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,MAAA;AACA,WAFA,MAEA;AACA,YAAA,MAAA,CAAA,UAAA,GAAA,GAAA,CAAA,MAAA;AACA;AACA,SANA,MAMA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,GAAA,CAAA,OAAA;AACA;AACA,OAXA,EAWA,KAXA,CAWA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,OAAA,CAAA,GAAA,CAAA,OAAA;AACA,OAbA;AAcA;AA7EA;AA5BA,CAAA","sourcesContent":["<template>\r\n  <a-modal\r\n    title=\"课程作者\"\r\n    :width=\"600\"\r\n    :visible=\"visible\"\r\n    :confirmLoading=\"confirmLoading\"\r\n    @ok=\"handleOk\"\r\n    @cancel=\"handleCancel\"\r\n    cancelText=\"关闭\"\r\n  >\r\n    <a-spin :spinning=\"confirmLoading\">\r\n      <a-form :form=\"form\">\r\n        <a-form-item\r\n          :labelCol=\"labelCol\"\r\n          :wrapperCol=\"wrapperCol\"\r\n          label=\"课程作者\">\r\n          <a-auto-complete\r\n            class=\"global-search\"\r\n            @select=\"onSelect\"\r\n            @search=\"handleSearch\"\r\n            optionLabelProp=\"text\"\r\n            v-decorator=\"['selected',{ rules: [{ required: true, message: '请输入作者名称' }] }]\"\r\n            placeholder=\"请输入作者名称\"\r\n          >\r\n            <template slot=\"dataSource\">\r\n              <a-select-option v-for=\"item in dataSource\" :key=\"item.userId\" :text=\"item.nickName\" :value=\"String(item.userId)\" class=\"selece-option\">\r\n                <a-avatar :src=\"item.header\" :srcSet=\"item.header\" style=\"margin-right: 15px\"></a-avatar>\r\n                {{ item.nickName }}\r\n              </a-select-option>\r\n            </template>\r\n            <a-input class=\"associate_input\">\r\n              <a-button slot=\"suffix\" class=\"search-btn\" type=\"primary\" size=\"large\" @click=\"beginSearch\">\r\n                <a-icon type=\"search\"></a-icon>\r\n              </a-button>\r\n            </a-input>\r\n          </a-auto-complete>\r\n        </a-form-item>\r\n      </a-form>\r\n    </a-spin>\r\n  \r\n  </a-modal>\r\n</template>\r\n\r\n<script>\r\n  import { getAction } from \"@api/manage\";\r\n\r\n  export default {\r\n    name: \"AssociatedModal\",\r\n    data () {\r\n      return {\r\n        appUserId: null,\r\n        userId: null,\r\n        visible: false,\r\n        confirmLoading: false,\r\n        form: this.$form.createForm(this),\r\n        labelCol: {\r\n          xs: { span: 24 },\r\n          sm: { span: 5 },\r\n        },\r\n        wrapperCol: {\r\n          xs: { span: 24 },\r\n          sm: { span: 16 },\r\n        },\r\n        searchParam: '',    // 搜索字段\r\n        selectParam: '',    //  选中作者\r\n        dataSource: [],     // 选择数据源\r\n        url: {\r\n          searchUrl: '/system/appuserinfo/getUserBYPhoneOrCodeOrNickName',\r\n          // associUrl: '/sys/user/checkuser',\r\n          // updateId: '/sys/user/updateSysUserToAppUserId'\r\n        }\r\n        \r\n      }\r\n    },\r\n    methods: {\r\n      show () {\r\n        this.form.resetFields();\r\n        // this.userId = id;\r\n        this.visible = true\r\n      },\r\n      // 表单提交\r\n      handleOk () {\r\n        // 验证用户是否已进行了关联\r\n        this.form.validateFields((err) => {\r\n          if (!err) {\r\n            this.confirmLoading = true;\r\n            let seleData = {\r\n              authorName: this.selectParam,\r\n              author: this.appUserId\r\n            }\r\n            this.$emit('ok', seleData);\r\n\r\n            this.confirmLoading = false;\r\n            this.handleCancel();\r\n            // getAction(this.url.associUrl, { appUserId: this.appUserId }).then(res => {\r\n            //   if(res.success) {\r\n            //     getAction(this.url.updateId, { appUserId: this.appUserId, userId: this.userId }).then(res => {\r\n            //       if (res.success) {\r\n            //         this.$message.success(res.message);\r\n            //         this.$emit('ok');\r\n            //       }else{\r\n            //         this.$message.warning(res.message);\r\n            //       }\r\n            //     }).finally(() => {\r\n            //\r\n            //     })\r\n            //   } else {\r\n            //     this.$message.warning(res.message)\r\n            //   }\r\n            // }).catch(err => {\r\n            //   this.$message.warning(err.message)\r\n            // })\r\n          }\r\n        })\r\n      },\r\n      // modal取消\r\n      handleCancel () {\r\n        this.$emit('close');\r\n        this.dataSource = [];\r\n        this.searchParam = '';\r\n        this.visible = false;\r\n      },\r\n    //  输入选择框\r\n      onSelect (value) {\r\n        console.log(value)\r\n        this.dataSource.forEach(item => {\r\n          if (item.userId === Number(value)) {\r\n            this.selectParam = item.nickName;\r\n            this.appUserId = value\r\n          }\r\n        })\r\n      },\r\n      handleSearch(value) {\r\n        this.searchParam = value\r\n      },\r\n    //  开始搜索\r\n      beginSearch () {\r\n        getAction(this.url.searchUrl, {searchParam: this.searchParam}).then(res => {\r\n          console.log(res)\r\n          if (res.success) {\r\n            if (res.result.length === 0) {\r\n              this.$message.warning('暂无数据')\r\n            } else {\r\n              this.dataSource = res.result\r\n            }\r\n          } else {\r\n            this.$message.warning(res.message)\r\n          }\r\n        }).catch(err => {\r\n          this.$message.warning(err.message)\r\n        })\r\n      }    \r\n    }\r\n  }\r\n</script>\r\n\r\n<style>\r\n  .global-search .associate_input .ant-input-suffix {\r\n    right: 0 !important;\r\n  }\r\n  .global-search .ant-input-suffix .ant-btn-lg {\r\n    height: 32px;\r\n  }\r\n  .global-search .ant-input-affix-wrapper .ant-input:not(:last-child) {\r\n    padding: 0 50px 0 12px;\r\n  }\r\n  \r\n  .global-search.ant-select-auto-complete .ant-input-affix-wrapper .ant-input-suffix button {\r\n    border-top-left-radius: 0;\r\n    border-bottom-left-radius: 0;\r\n  }\r\n  .selece-option {\r\n    padding: 10px 10px;\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n</style>"],"sourceRoot":"src/views/system/modules"}]}