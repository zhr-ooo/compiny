{"remainingRequest":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_thread-loader@2.1.3@thread-loader\\dist\\cjs.js!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js??ref--0-0!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\src\\views\\consumer\\Ranking.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\src\\views\\consumer\\Ranking.vue","mtime":1595406808038},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_thread-loader@2.1.3@thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _defineProperty from \"E:/gitweb/vcloudsapce_web/ant-design-vue-jeecg/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\n\nvar _methods;\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { filterObj, formatDate } from \"@/utils/util\";\nimport ProductNewBigImg from \"../product/modules/ProductNewBigImg\"; // import { JeecgListMixin } from \"@/mixins/JeecgListMixin\";\n\nimport moment from \"moment\";\nimport { getAction } from \"@/api/manage\";\nexport default {\n  name: \"Ranking\",\n  // mixins: [JeecgListMixin],\n  components: {\n    ProductNewBigImg: ProductNewBigImg\n  },\n  data: function data() {\n    return {\n      dataSource: [],\n      loading: false,\n      ipagination: {\n        current: 1,\n        pageSize: 10,\n        pageSizeOptions: [\"10\", \"20\", \"30\"],\n        showTotal: function showTotal(total, range) {\n          return range[0] + \"-\" + range[1] + \" 共\" + total + \"条\";\n        },\n        showQuickJumper: true,\n        showSizeChanger: true,\n        total: 0\n      },\n      description: \"排行榜\",\n      queryParam: {\n        createTimeRange: [],\n        logType: \"0\",\n        beginTime: \"\",\n        endTime: \"\",\n        operType: \"\"\n      },\n      param: {\n        createTimeRange: [],\n        logType: \"0\",\n        beginTime: \"\",\n        endTime: \"\",\n        operType: \"\"\n      },\n      columns: [{\n        title: \"手机号\",\n        align: \"center\",\n        dataIndex: \"phone\"\n      }, {\n        title: \"v云号\",\n        align: \"center\",\n        dataIndex: \"code\"\n      }, {\n        title: \"昵称\",\n        align: \"center\",\n        dataIndex: \"nickName\"\n      }, {\n        title: \"头像\",\n        align: \"center\",\n        dataIndex: \"header\",\n        scopedSlots: {\n          customRender: \"header\"\n        }\n      }, {\n        title: \"会员级别\",\n        align: \"center\",\n        dataIndex: \"isVip\",\n        customRender: function customRender(text) {\n          if (text == \"0\") {\n            return \"普通会员\";\n          } else if (text == \"1\") {\n            return \"3天体验期\";\n          } else if (text == \"4\") {\n            return \"年费\";\n          } else if (text == \"5\") {\n            return \"半年费\";\n          }\n        }\n      }, {\n        title: \"创客达人\",\n        align: \"center\",\n        dataIndex: \"isCreator\",\n        customRender: function customRender(text) {\n          if (text == 1) {\n            return \"是\";\n          } else {\n            return \"否\";\n          }\n        }\n      }, {\n        title: \"v云大使\",\n        align: \"center\",\n        dataIndex: \"ambassador\",\n        customRender: function customRender(text) {\n          if (text == 1) {\n            return \"是\";\n          } else {\n            return \"否\";\n          }\n        }\n      }, {\n        title: \"V值\",\n        align: \"center\",\n        dataIndex: \"credits\"\n      }],\n      url: {\n        list: \"/system/ranking/list\"\n      }\n    };\n  },\n  created: function created() {\n    // const nowTime = new Date().getTime();\n    // const endTime = formatDate(nowTime, \"yyyy-MM-dd\");\n    // const beginTime = formatDate(nowTime - 24 * 60 * 60 * 1000, \"yyyy-MM-dd\");\n    // this.queryParam.createTimeRange = [\n    //   moment(beginTime, \"YYYY-MM-DD\"),\n    //   moment(endTime, \"YYYY-MM-DD\")\n    // ];\n    // this.queryParam.beginTime = beginTime + \" 00:00:00\";\n    // this.queryParam.endTime = endTime + \" 00:00:00\";\n    this.loadData(1);\n  },\n  methods: (_methods = {\n    searchQuery: function searchQuery() {\n      this.loadData(1);\n    },\n    searchReset: function searchReset() {\n      this.queryParam = this.param || {};\n      this.loadData(1);\n    },\n    loadData: function loadData(arg) {\n      var _this = this;\n\n      if (arg === 1) {\n        this.ipagination.current = 1;\n      }\n\n      var params = this.getQueryParams(); //查询条件\n\n      this.loading = true;\n      getAction(this.url.list, params).then(function (res) {\n        if (res.success) {\n          _this.state = res.result.records.state;\n          _this.dataSource = res.result.records;\n          _this.ipagination.total = res.result.total;\n          console.log(res);\n        }\n\n        if (res.code === 510) {\n          _this.$message.warning(res.message);\n        }\n\n        _this.loading = false;\n      });\n    },\n    bigImg: function bigImg(text) {\n      if (text) {\n        this.$refs.bigImg.make(text);\n      }\n    },\n    getQueryField: function getQueryField() {\n      //TODO 字段权限控制\n      var str = \"id,\";\n      this.columns.forEach(function (value) {\n        str += \",\" + value.dataIndex;\n      });\n      return str;\n    },\n    getQueryParams: function getQueryParams() {\n      console.log(this.queryParam.createTimeRange);\n      var param = Object.assign({}, this.queryParam, this.isorter);\n      param.field = this.getQueryField();\n      param.pageNo = this.ipagination.current;\n      param.pageSize = this.ipagination.pageSize;\n      param.createTimeRange = this.createTimeRange;\n      param.beginTime = this.queryParam.beginTime;\n      param.endTime = this.queryParam.endTime;\n      return filterObj(param);\n    }\n  }, _defineProperty(_methods, \"searchReset\", function searchReset() {\n    var that = this;\n    var logType = that.queryParam.logType;\n    that.queryParam = {}; //清空查询区域参数\n\n    that.queryParam.logType = logType;\n    that.queryParam.operType = \"\";\n    that.loadData(this.ipagination.current);\n  }), _defineProperty(_methods, \"onDateChange\", function onDateChange(value, dateString) {\n    console.log(dateString[0], dateString[1]);\n    this.queryParam.beginTime = dateString[0] + \" 00:00:00\";\n    this.queryParam.endTime = dateString[1] + \" 00:00:00\";\n  }), _defineProperty(_methods, \"onDateOk\", function onDateOk(value) {\n    console.log(value);\n  }), _defineProperty(_methods, \"handleTableChange\", function handleTableChange(pagination, filters, sorter) {\n    //分页、排序、筛选变化时触发\n    //TODO 筛选\n    if (Object.keys(sorter).length > 0) {\n      this.isorter.column = sorter.field;\n      this.isorter.order = \"ascend\" == sorter.order ? \"asc\" : \"desc\";\n    }\n\n    this.ipagination = pagination;\n    this.loadData();\n  }), _methods)\n};",null]}