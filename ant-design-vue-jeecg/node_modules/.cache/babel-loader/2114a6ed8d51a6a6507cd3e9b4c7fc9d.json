{"remainingRequest":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_thread-loader@2.1.3@thread-loader\\dist\\cjs.js!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js??ref--0-0!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\src\\views\\shops\\LiveRecord.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\src\\views\\shops\\LiveRecord.vue","mtime":1595581332576},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_thread-loader@2.1.3@thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { postAction, putAction, getAction } from \"@/api/manage\";\nimport ChartCard from \"@/components/ChartCard\";\nimport ProductNewBigImg from \"../product/modules/ProductNewBigImg\";\nimport { JeecgListMixin } from \"@/mixins/JeecgListMixin\";\nimport flvjs from \"flv.js/dist/flv.min.js\";\nimport JEllipsis from \"@/components/jeecg/JEllipsis\";\nexport default {\n  name: \"LiveRecord\",\n  mixins: [JeecgListMixin],\n  components: {\n    ProductNewBigImg: ProductNewBigImg,\n    JEllipsis: JEllipsis,\n    ChartCard: ChartCard\n  },\n  data: function data() {\n    return {\n      description: \"后台直播记录列表\",\n      dataSource: [],\n      liveLikeNum: 0,\n      liveVDiamondMoney: 0,\n      liveViewNum: 0,\n      streamAmount: 0,\n      player: null,\n      columns: [{\n        title: \"用户名称\",\n        align: \"center\",\n        dataIndex: \"nickName\"\n      }, {\n        title: \"房间号\",\n        align: \"center\",\n        dataIndex: \"code\"\n      }, {\n        title: \"直播标题\",\n        align: \"center\",\n        dataIndex: \"title\"\n      }, // {\n      //   title: \"封面图\",\n      //   align: \"center\",\n      //   dataIndex: \"coverImg\",\n      //   scopedSlots: { customRender: \"header\" }\n      // },\n      {\n        title: \"推流地址\",\n        align: \"center\",\n        dataIndex: \"coverImg\",\n        scopedSlots: {\n          customRender: \"templateTitle\"\n        }\n      }, {\n        title: \"开播时间\",\n        align: \"center\",\n        dataIndex: \"startTime\",\n        scopedSlots: {\n          customRender: \"createTime\"\n        }\n      }, {\n        title: \"结束时间\",\n        align: \"center\",\n        dataIndex: \"endTime\",\n        scopedSlots: {\n          customRender: \"endTime\"\n        }\n      }, {\n        title: \"粉丝数量\",\n        align: \"center\",\n        dataIndex: \"fansNum\"\n      }, {\n        title: \"热度值\",\n        align: \"center\",\n        dataIndex: \"heatValue\"\n      }, {\n        title: \"点赞数\",\n        align: \"center\",\n        dataIndex: \"likeNum\"\n      }, {\n        title: \"V钻\",\n        align: \"center\",\n        dataIndex: \"money\"\n      }, {\n        title: \"交易流水\",\n        align: \"center\",\n        dataIndex: \"streamAmount\"\n      }, {\n        title: \"开播时长\",\n        align: \"center\",\n        dataIndex: \"totalTime\",\n        scopedSlots: {\n          customRender: \"totalTime\"\n        }\n      }, {\n        title: \"状态\",\n        align: \"center\",\n        dataIndex: \"state\",\n        customRender: function customRender(text) {\n          if (text == 0) {\n            return \"关闭\";\n          } else if (text == 1) {\n            return \"开启\";\n          } else if (text == 2) {\n            return \"封禁\";\n          }\n        }\n      }, {\n        title: \"房间类型\",\n        align: \"center\",\n        dataIndex: \"type\",\n        customRender: function customRender(text) {\n          if (text == 1) {\n            return \"公开\";\n          } else if (text == 2) {\n            return \"私密\";\n          } else if (text == 3) {\n            return \"收费\";\n          }\n        }\n      }, {\n        title: \"观看人数\",\n        align: \"center\",\n        dataIndex: \"viewsNum\"\n      }, {\n        title: \"是否推荐\",\n        align: \"center\",\n        dataIndex: \"mode\",\n        customRender: function customRender(text) {\n          if (text == 1) {\n            return \"否\";\n          } else if (text == 2) {\n            return \"是\";\n          }\n        }\n      }, {\n        title: \"用户标识\",\n        align: \"center\",\n        dataIndex: \"marker\",\n        customRender: function customRender(text) {\n          if (text == 0) {\n            return \"测试\";\n          } else if (text == 1) {\n            return \"正式\";\n          } else if (text == 2) {\n            return \"官方\";\n          }\n        }\n      }, {\n        title: \"操作\",\n        dataIndex: \"action\",\n        align: \"center\",\n        scopedSlots: {\n          customRender: \"action\"\n        },\n        width: 100\n      }],\n      url: {\n        list: \"/system/live/record/list\",\n        recommend: \"/system/live/record/recommend\"\n      }\n    };\n  },\n  created: function created() {},\n  //  created(){\n  //   if(flvjs.isSupported()){\n  //     this.player = flvjs.createPlayer({\n  //       type: 'flv',\n  //       isLive: 'true',\n  //       url: 'http://5815.liveplay.myqcloud.com/live/5815_89aad37e06ff11e892905cb9018cf0d4_550.flv' //flv文件地址\n  //       // url:'',\n  //     });\n  //   }\n  // },\n  // mounted() {\n  //     var videoElement = document.getElementById('videoElement35200870');\n  //     this.player.attachMediaElement(videoElement);\n  //     this.player.load()\n  // },\n  methods: {\n    //  图片点击放大\n    bigImg: function bigImg(text) {\n      if (text) {\n        this.$refs.bigImg.make(text);\n      }\n    },\n    loadData: function loadData(arg) {\n      var _this = this;\n\n      if (!this.url.list) {\n        this.$message.error(\"请设置url.list属性!\");\n        return;\n      } //加载数据 若传入参数1则加载第一页的内容\n\n\n      if (arg === 1) {\n        this.ipagination.current = 1;\n      }\n\n      var params = this.getQueryParams(); //查询条件\n\n      this.loading = true;\n      getAction(this.url.list, params).then(function (res) {\n        if (res.success) {\n          console.log(res);\n          _this.dataSource = res.result.pageList.records;\n          _this.ipagination.total = res.result.pageList.total;\n          _this.total = res.result.pageList.total;\n          _this.liveLikeNum = res.result.liveLikeNum;\n          _this.liveVDiamondMoney = res.result.liveVDiamondMoney;\n          _this.liveViewNum = res.result.liveViewNum;\n          _this.streamAmount = res.result.streamAmount;\n        }\n\n        if (res.code === 510) {\n          _this.$message.warning(res.message);\n        }\n\n        _this.loading = false;\n      });\n    },\n    click: function click(record) {\n      console.log(record);\n      var that = this;\n\n      if (record.state != 1) {\n        alert(\"当前直播已关闭，请查看其他直播吧~\");\n      } else {\n        window.open(\"http://vyun.dujialive.com/liveplayer/lxPc.html?flv=\" + record.streamAddrUrl);\n      } // window.location.href = \"http://127.0.0.1:5501/liveplayer/lx1.html?flv=\"+record.streamAddrUrl\n\n    },\n    HandleSet: function HandleSet(record) {\n      var that = this;\n      var mode = record.mode;\n\n      if (mode == 2) {\n        var type = 1;\n      } else if (mode == 1) {\n        var type = 2;\n      }\n\n      var arr = \"?id=\".concat(record.id, \"&mode=\").concat(type);\n      putAction(that.url.recommend + arr).then(function (res) {\n        if (res.success) {\n          that.$message.success(res.message);\n          console.log(res);\n          that.loadData();\n        } else {\n          that.$message.warning(res.message);\n        }\n      });\n    }\n  }\n};",null]}