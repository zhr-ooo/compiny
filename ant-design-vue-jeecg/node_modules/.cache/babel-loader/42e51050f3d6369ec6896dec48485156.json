{"remainingRequest":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_thread-loader@2.1.3@thread-loader\\dist\\cjs.js!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js??ref--0-0!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js??vue-loader-options!E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\src\\views\\liveplayer\\CommodityOrder.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\src\\views\\liveplayer\\CommodityOrder.vue","mtime":1595828985734},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_thread-loader@2.1.3@thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_babel-loader@8.1.0@babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\gitweb\\vcloudsapce_web\\ant-design-vue-jeecg\\node_modules\\_vue-loader@15.9.2@vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { filterObj, formatDate } from \"@/utils/util\";\nimport { postAction, getAction, putAction } from \"@/api/manage\";\nimport ChartCard from \"@/components/ChartCard\";\nimport { JeecgListMixin } from \"@/mixins/JeecgListMixin\";\nimport OrderDetail from \"./modules/OrderDetail\";\nimport JEllipsis from \"@/components/jeecg/JEllipsis\";\nimport OrderModals from \"./modules/OrderModals\";\nimport moment from \"moment\";\nexport default {\n  name: \"CommodityOrder\",\n  mixins: [JeecgListMixin],\n  components: {\n    OrderModals: OrderModals,\n    OrderDetail: OrderDetail,\n    JEllipsis: JEllipsis,\n    ChartCard: ChartCard\n  },\n  data: function data() {\n    return {\n      description: \"商品订单列表\",\n      goodOrderTotalMoney: 0,\n      goodsOrderCount: 0,\n      //商品订单数量\n      // goodsOrderMoney: 0,\n      store: \"\",\n      storeMon: \"\",\n      storeZon: \"\",\n      state: \"\",\n      queryParam: {\n        createTimeRange: [],\n        logType: \"0\",\n        beginTime: \"\",\n        endTime: \"\",\n        operType: \"\"\n      },\n      param: {\n        createTimeRange: [],\n        logType: \"0\",\n        beginTime: \"\",\n        endTime: \"\",\n        operType: \"\"\n      },\n      columns: [{\n        title: \"卖家\",\n        align: \"center\",\n        dataIndex: \"sellerName\"\n      }, {\n        title: \"收货人姓名\",\n        align: \"center\",\n        dataIndex: \"consigneeName\",\n        width: 80\n      }, {\n        title: \"收货人手机号\",\n        align: \"center\",\n        dataIndex: \"consigneePhone\"\n      }, {\n        title: \"收货人地址\",\n        align: \"center\",\n        dataIndex: \"consigneeAddress\",\n        scopedSlots: {\n          customRender: \"templateTitle\"\n        },\n        width: 100\n      }, // {\n      //   title: \"订单编号\",\n      //   align: \"center\",\n      //   dataIndex: \"orderNo\",\n      //   scopedSlots: { customRender: \"templateTitle\" },\n      // },\n      {\n        title: \"快递公司\",\n        align: \"center\",\n        dataIndex: \"courierCompany\"\n      }, {\n        title: \"快递单号\",\n        align: \"center\",\n        dataIndex: \"courierNo\",\n        scopedSlots: {\n          customRender: \"templateTitle\"\n        }\n      }, {\n        title: \"商品名称\",\n        align: \"center\",\n        dataIndex: \"goodsName\"\n      }, {\n        title: \"购买商品数量\",\n        align: \"center\",\n        dataIndex: \"goodsNum\"\n      }, {\n        title: \"购买商品单价\",\n        align: \"center\",\n        dataIndex: \"money\"\n      }, {\n        title: \"购买商品总价\",\n        align: \"center\",\n        dataIndex: \"totalMoney\"\n      }, {\n        title: \"购买时真实支付金额\",\n        align: \"center\",\n        dataIndex: \"payMoney\",\n        width: 100\n      }, {\n        title: \"商品来源\",\n        align: \"center\",\n        dataIndex: \"source\",\n        customRender: function customRender(text) {\n          if (text == 1) {\n            return \"商城\";\n          } else if (text == 2) {\n            return \"商家\";\n          }\n        }\n      }, {\n        title: \"订单状态\",\n        align: \"center\",\n        dataIndex: \"state\",\n        customRender: function customRender(text) {\n          if (text == 0) {\n            return \"已取消\";\n          } else if (text == 1) {\n            return \"待支付\";\n          } else if (text == 2) {\n            return \"已支付\";\n          } else if (text == 3) {\n            return \"已发货\";\n          } else if (text == 4) {\n            return \"已签收\";\n          } else if (text == 5) {\n            return \"已完成\";\n          }\n        }\n      }, {\n        title: \"支付方式\",\n        align: \"center\",\n        dataIndex: \"payMode\",\n        customRender: function customRender(text) {\n          if (text == 1) {\n            return \"支付宝\";\n          } else if (text == 2) {\n            return \"微信\";\n          } else if (text == 3) {\n            return \"V币\";\n          }\n        }\n      }, // {\n      //   title: \"交易编号\",\n      //   align: \"center\",\n      //   dataIndex: \"tradeNo\",\n      //   scopedSlots: { customRender: \"templateTitle\" },\n      // },\n      {\n        title: \"备注\",\n        align: \"center\",\n        dataIndex: \"remark\",\n        scopedSlots: {\n          customRender: \"templateTitle\"\n        },\n        width: 100\n      }, {\n        title: \"用户标识\",\n        align: \"center\",\n        dataIndex: \"marker\",\n        customRender: function customRender(text) {\n          if (text == 0) {\n            return \"测试\";\n          } else if (text == 1) {\n            return \"正式\";\n          } else if (text == 2) {\n            return \"官方\";\n          }\n        }\n      }, {\n        title: \"创建时间\",\n        align: \"center\",\n        dataIndex: \"createTime\",\n        scopedSlots: {\n          customRender: \"createTime\"\n        }\n      }, {\n        title: \"操作\",\n        dataIndex: \"action\",\n        align: \"center\",\n        scopedSlots: {\n          customRender: \"action\"\n        },\n        width: 200\n      }],\n      url: {\n        list: \"/system/mall/order/list\",\n        edit: \"/system/mall/order/detail\",\n        excel: \"/system/mall/order/exportExcel\",\n        refund: \"/system/mall/order/refund\" //退货\n\n      }\n    };\n  },\n  created: function created() {\n    // const nowTime = new Date().getTime();\n    // const endTime = formatDate(nowTime, \"yyyy-MM-dd\");\n    // const beginTime = formatDate(nowTime - 24 * 60 * 60 * 1000, \"yyyy-MM-dd\");\n    // this.queryParam.createTimeRange = [\n    //   moment(beginTime, \"YYYY-MM-DD\"),\n    //   moment(endTime, \"YYYY-MM-DD\")\n    // ];\n    // this.queryParam.beginTime = beginTime + \" 00:00:00\";\n    // this.queryParam.endTime = endTime + \" 00:00:00\";\n    this.loadData(1);\n  },\n  methods: {\n    handleMembersList: function handleMembersList(record) {\n      this.$refs.modalForm.open(record);\n    },\n    handleTui: function handleTui(record) {\n      var that = this;\n      console.log(record);\n      putAction(this.url.refund, {\n        id: record.id\n      }).then(function (res) {\n        if (res.success) {\n          that.$message.success(res.message);\n        } else {\n          that.$message.warning(res.message);\n        }\n\n        that.loadData();\n      });\n    },\n    clickThenCheck: function clickThenCheck(record) {\n      var _this = this;\n\n      return {\n        on: {\n          click: function click() {\n            _this.$refs.modalForm1.edit(record);\n\n            _this.$refs.modalForm1.title = \"详情\";\n            _this.$refs.modalForm1.disableSubmit = true;\n          }\n        }\n      };\n    },\n    handleDetail: function handleDetail(record) {\n      this.$refs.modalForm1.edit(record);\n      this.$refs.modalForm1.title = \"详情\";\n      this.$refs.modalForm1.disableSubmit = true;\n    },\n    getQueryParams: function getQueryParams() {\n      console.log(this.queryParam.createTimeRange);\n      var param = Object.assign({}, this.queryParam, this.isorter);\n      param.field = this.getQueryField();\n      param.pageNo = this.ipagination.current;\n      param.pageSize = this.ipagination.pageSize;\n      param.createTimeRange = this.createTimeRange;\n      param.beginTime = this.queryParam.beginTime;\n      param.endTime = this.queryParam.endTime;\n      return filterObj(param);\n    },\n    onDateChange: function onDateChange(value, dateString) {\n      console.log(dateString[0], dateString[1]);\n      this.queryParam.beginTime = dateString[0] + \" 00:00:00\";\n      this.queryParam.endTime = dateString[1] + \" 00:00:00\";\n    },\n    onDateOk: function onDateOk(value) {\n      console.log(value);\n    },\n    exportExcel: function exportExcel() {\n      var that = this;\n      var params = this.getQueryParams();\n      var url = \"\";\n\n      if (params.consigneeName != undefined) {\n        if (url == \"\") {\n          url = \"consigneeName=\" + params.consigneeName;\n        } else {\n          url = \"&consigneeName=\" + params.consigneeName;\n        }\n      }\n\n      if (params.consigneePhone != undefined) {\n        if (url == \"\") {\n          url += \"consigneePhone=\" + params.consigneePhone;\n        } else {\n          url += \"&consigneePhone=\" + params.consigneePhone;\n        }\n      }\n\n      if (params.goodsName != undefined) {\n        if (url == \"\") {\n          url += \"goodsName=\" + params.goodsName;\n        } else {\n          url += \"&goodsName=\" + params.goodsName;\n        }\n      }\n\n      if (params.source != undefined) {\n        console.log(url);\n\n        if (url == \"\") {\n          url += \"source=\" + params.source;\n        } else {\n          url += \"&source=\" + params.source;\n        }\n      }\n\n      if (params.payMode != undefined) {\n        if (url == \"\") {\n          url += \"payMode=\" + params.payMode;\n        } else {\n          url += \"&payMode=\" + params.payMode;\n        }\n      }\n\n      if (params.state != undefined) {\n        if (url == \"\") {\n          url += \"state=\" + params.state;\n        } else {\n          url += \"&state=\" + params.state;\n        }\n      }\n\n      if (params.orderNo != undefined) {\n        if (url == \"\") {\n          url += \"orderNo=\" + params.orderNo;\n        } else {\n          url += \"&orderNo=\" + params.orderNo;\n        }\n      }\n\n      window.location.href = \"/vyun/system/mall/order/exportExcel?\" + url;\n      console.log(url); // getAction(this.url.excel, params)\n      //   .then(res => {\n      //     console.log(res)\n      //     if (res.success) {\n      //       that.$message.success(res.message);\n      //       that.$emit(\"ok\");\n      //     } else {\n      //       that.$message.warning(res.message);\n      //     }\n      //   })\n      //   .finally(() => {\n      //     that.confirmLoading = false;\n      //   });\n    },\n    loadData: function loadData(arg) {\n      var _this2 = this;\n\n      if (!this.url.list) {\n        this.$message.error(\"请设置url.list属性!\");\n        return;\n      } //加载数据 若传入参数1则加载第一页的内容\n\n\n      if (arg === 1) {\n        this.ipagination.current = 1;\n      }\n\n      var params = this.getQueryParams(); //查询条件\n\n      this.loading = true;\n      getAction(this.url.list, params).then(function (res) {\n        if (res.success) {\n          console.log(res);\n          _this2.dataSource = res.result.pageList.records;\n          _this2.ipagination.total = res.result.pageList.total;\n          _this2.total = res.result.pageList.total;\n          _this2.goodOrderTotalMoney = res.result.goodOrderTotalMoney;\n          _this2.goodsOrderCount = res.result.goodsOrderCount; // this.goodsOrderMoney = res.result.goodsOrderMoney;\n\n          _this2.state = res.result.state; // var statename = '';\n\n          if (_this2.state == null) {\n            _this2.state = \"\";\n            _this2.store = \"卖出商品订单数量\";\n            _this2.storeMon = \"卖出商品订单单价\";\n            _this2.storeZon = \"卖出商品订单总金额\";\n          } else {\n            console.log(_this2.state);\n\n            if (_this2.state == 2) {\n              _this2.state = \"(已支付)\";\n              _this2.store = \"商品订单数量\";\n              _this2.storeMon = \"商品订单单价\";\n              _this2.storeZon = \"商品订单总金额\";\n            } else if (_this2.state == 3) {\n              _this2.state = \"(已发货)\";\n              _this2.store = \"商品订单数量\";\n              _this2.storeMon = \"商品订单单价\";\n              _this2.storeZon = \"商品订单总金额\";\n            } else if (_this2.state == 4) {\n              _this2.state = \"(已签收)\";\n              _this2.store = \"商品订单数量\";\n              _this2.storeMon = \"商品订单单价\";\n              _this2.storeZon = \"商品订单总金额\";\n            } else if (_this2.state == 5) {\n              _this2.state = \"(已完成)\";\n              _this2.store = \"商品订单管理\";\n              _this2.storeMon = \"商品订单单价\";\n              _this2.storeZon = \"商品订单总金额\";\n            } else if (_this2.state == 0) {\n              _this2.state = \"(已取消)\";\n              _this2.store = \"商品订单数量\";\n              _this2.storeMon = \"商品订单单价\";\n              _this2.storeZon = \"商品订单总金额\";\n            } else if (_this2.state == 1) {\n              _this2.state = \"(待支付)\";\n              _this2.store = \"商品订单数量\";\n              _this2.storeMon = \"商品订单单价\";\n              _this2.storeZon = \"商品订单总金额\";\n            }\n          }\n\n          console.log(_this2.store);\n        }\n\n        if (res.code === 510) {\n          _this2.$message.warning(res.message);\n        }\n\n        _this2.loading = false;\n      });\n    }\n  }\n};",null]}